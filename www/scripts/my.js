var cid = "", pid = "", iid = ""; function setCourse(a) { cid = a } function setProgramme(a) { pid = a } function setIntake(a) { iid = a } document.addEventListener("deviceready", onDeviceReady, !1); document.addEventListener("menubutton", function () { $.mobile.changePage("#loginPage") }, !1); function logout() { window.localStorage.clear(); initLogin() }
function onDeviceReady() { var a = window.localStorage.getItem("uid"), b = window.localStorage.getItem("pwd"); null != a && null != b ? verifyLogin(a, b) : (document.getElementById("logoutButton").style.display = "none", document.getElementById("loginPanel").style.display = "block") }
function initLogin() { var a = window.localStorage.getItem("uid"), b = window.localStorage.getItem("pwd"); null != a && null != b ? ($("#uName").html("Logged as: " + window.localStorage.getItem("uname")), document.getElementById("logoutButton").style.display = "block", document.getElementById("loginPanel").style.display = "none") : ($("#uName").html(""), document.getElementById("logoutButton").style.display = "none", document.getElementById("loginPanel").style.display = "block") }
function verifyLogin(a, b) { $.getJSON("http://m.eduquest.com.sg/login.ashx?u=" + a + "&p=" + b, function (c) { 1 == c.isApproved ? (window.localStorage.setItem("uid", a), window.localStorage.setItem("pwd", b), window.localStorage.setItem("role", c.Role), window.localStorage.setItem("uname", c.Name)) : (alert("Invalid Username or Password"), window.localStorage.clear()); initLogin() }) }
function validateForm() { var a = btoa(document.forms.myForm.UID.value), b = btoa(document.forms.myForm.PWD.value); null == a || "" == a ? alert("Username cannot Blank") : null == b || "" == b ? alert("Password cannot Blank") : verifyLogin(a, b); return !1 } $(document).on("pagebeforeshow", "#courseList1", function () { $("#lv1").html('<li style="background:transparent;"><center><div class="ui-icon-load" style="width:32px;height:32px;"></div></center></li>').listview("refresh") });
$(document).on("pageshow", "#courseList1", function () { var a = ""; $.getJSON("http://m.eduquest.com.sg/getCourses.ashx?part=1", function (b) { for (i in b) a = 1 == b[i].isDivider ? a + ('<li data-role="list-divider">' + b[i].nodeTxt + "</li>") : a + ('<li><a data-transition="none" href="#coursePage" onclick="setCourse(' + b[i].URL + ')" data-ajax="false">' + b[i].nodeTxt + "</a></li>"); $("#lv1").html(a).listview("refresh") }) }); $(document).on("pagebeforeshow", "#courseList3", function () { $("#lv3").html('<li style="background:transparent;"><center><div class="ui-icon-load" style="width:32px;height:32px;"></div></center></li>').listview("refresh") });
$(document).on("pageshow", "#courseList3", function () { var a = ""; $.getJSON("http://m.eduquest.com.sg/getCourses.ashx?part=3", function (b) { for (i in b) a = 1 == b[i].isDivider ? a + ('<li data-role="list-divider">' + b[i].nodeTxt + "</li>") : a + ('<li><a data-transition="none" href="#coursePage" onclick="setCourse(' + b[i].URL + ')" data-ajax="false">' + b[i].nodeTxt + "</a></li>"); $("#lv3").html(a).listview("refresh") }) }); $(document).on("pagebeforeshow", "#courseList4", function () { $("#lv4").html('<li style="background:transparent;"><center><div class="ui-icon-load" style="width:32px;height:32px;"></div></center></li>').listview("refresh") });
$(document).on("pageshow", "#courseList4", function () { var a = ""; $.getJSON("http://m.eduquest.com.sg/getCourses.ashx?part=4", function (b) { for (i in b) a = 1 == b[i].isDivider ? a + ('<li data-role="list-divider">' + b[i].nodeTxt + "</li>") : a + ('<li><a data-transition="none" href="#coursePage" onclick="setCourse(' + b[i].URL + ')" data-ajax="false">' + b[i].nodeTxt + "</a></li>"); $("#lv4").html(a).listview("refresh") }) }); $(document).on("pagebeforeshow", "#coursePage", function () { $("#courseDetail").html('<center><div class="ui-icon-load" style="width:32px;height:32px;"></div></center>') });
$(document).on("pageshow", "#coursePage", function () { var a = ""; $.getJSON("http://m.eduquest.com.sg/getCourseDetails.ashx?cid=" + cid, function (b) { a += '<a href="#intakePage" onclick="setProgramme(\'' + b[0].URL + '\')" data-transition="none" class="ui-btn ui-corner-all ui-icon-check ui-nodisc-icon ui-alt-icon  ui-btn-icon-left">REGISTER</a><p>' + b[0].nodeTxt + "</p>"; for (i in b) a += "<h3>" + b[i].Header + "</h3><p>" + b[i].Content + "</p>"; $("#courseDetail").html(a) }) }); $(document).on("pagebeforeshow", "#intakePage", function () { $("#ilv").html('<li style="background:transparent;"><center><div class="ui-icon-load" style="width:32px;height:32px;"></div></center></li>').listview("refresh") });
$(document).on("pageshow", "#intakePage", function () {
    var a = "<li data-role='list-divider'>Course Schedules</li>"; $.getJSON("http://m.eduquest.com.sg/getIntakes.ashx?pid=" + pid, function (b) {
        for (i in b) a = 1 == b[i].canRegister ? "Company" == window.localStorage.getItem("role") ? a + ('<li><a href="#gregisterPage" onclick="setIntake(\'' + b[i].ID + '\')"  data-transition="none"><h2>' + b[i].Details + "</h2></a></li>") : a + ('<li><a data-transition="none" href="#loginPage">' + b[i].Details + "</a></li>") : a + ('<li><a data-transition="none" href="#">' +
b[i].Details + "</a></li>"); $("#ilv").html(a).listview("refresh")
    })
});
function validateGregister() {
    var a = document.forms.gregisterForm.scnt.value; if (null != a && "" != a) {
        var b = ""; $.getJSON("http://m.eduquest.com.sg/setGroupRegister.ashx?scnt=" + a + "&intakeid=" + iid, function (a) {
            b = 1 == a.isSuccess ? '<div class="jqm-block-content"><center><h3>Your online form has been submitted to our admin office successfully.</h3><p>Our team will contact you shortly to confirm and finalise your course registration.</p><p>Thank you for choosing Eduquest International Institute as your preferred training provider.</p><a href="#homePage" class="ui-btn ui-corner-all ui-btn-a" >HOME</a></center></div>' : '<div class="jqm-block-content"><center><h3>Not Registered</h3><p>' +
a.errorTxt + '</p><a href="#homePage" class="ui-btn ui-corner-all ui-btn-a" >HOME</a></center></div>'; $("#gregisterDetail").html(b)
        })
    } return !1
};
