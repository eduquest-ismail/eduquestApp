<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">

    document.addEventListener("deviceready", onDeviceReady, false);
  
    function onDeviceReady() {
      var x = window.localStorage.getItem("uid");
      var y = window.localStorage.getItem("pwd");
       if(x!=null && y!=null)
       {
          var arForm = $("#myForm").serializeArray();
                $.ajax({
                  type: "POST",
                  url: "http://m.eduquest.com.sg/WebService.asmx/validateLogin",
                  data: JSON.stringify({ formVars: arForm }),
                  contentType: "application/json; charset=utf-8",
                  dataType: "json",
                  success: function(msg) {
                    if(msg.d=="true")
                    {
                      startApp();
                    }
                    else
                    {
                      clearPwd();
                    }
                  }
                  failure: clearPwd
                });
       }
       else
       {
         clearPwd();
       }
    }
    function startApp()
    {
      window.open('http://m.eduquest.com.sg', '_self', 'location=yes');
    }
    function clearPwd()
    {
      window.localStorage.clear();
      document.getElementById('loginPanel').style.display = 'block';
    }
    function validateForm() {
      var x = document.forms["myForm"]["UID"].value;
      if (x == null || x == "") {
          alert("Username cannot Blank");
          return false;
      }
      var y = document.forms["myForm"]["PWD"].value;
      if (y == null || y == "") {
          alert("Password cannot Blank");
          return false;
      }
      window.localStorage.setItem("uid", x);
      window.localStorage.setItem("pwd", y);
    }
    </script>
    <style>
      .bg
      {
          background: rgba(255,203,140,1);
          background: -moz-radial-gradient(center, ellipse cover, rgba(255,203,140,1) 0%, rgba(255,146,10,1) 100%);
          background: -webkit-gradient(radial, center center, 0px, center center, 100%, , color-stop(0%, rgba(255,203,140,1)), color-stop(100%, rgba(255,146,10,1)));
          background: -webkit-radial-gradient(center, ellipse cover, rgba(255,203,140,1) 0%, rgba(255,146,10,1) 100%);
          background: -o-radial-gradient(center, ellipse cover, rgba(255,203,140,1) 0%, rgba(255,146,10,1) 100%);
          background: -ms-radial-gradient(center, ellipse cover, rgba(255,203,140,1) 0%, rgba(255,146,10,1) 100%);
          background: radial-gradient(ellipse at center, rgba(255,203,140,1) 0%, rgba(255,146,10,1) 100%);
          filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffcb8c', endColorstr='#ff920a', GradientType=1 );
      }
    </style>
  </head>
  <body class="bg">
    <div id="loginPanel" style="display: none;">
      <form name="myForm" onsubmit="return validateForm()">
        Username: <input type="text" name="UID"><br>
        Password: <input type="password" name="PWD">
        <input type="submit" value="Submit">
      </form>
    </div>
  </body>
</html>
